# VIM


vim                   在命令行中输入vim,进入vim编辑器
Esc                   退出i(插入)命令进行其他命令使用
:sh                   进入shell命令行,运行完命令后ctrl+d退出又一次进入vim编辑继续编辑在shell命令下，




# 配置文件 vim ~/.vimrc
```shell
set nu #显示行号
set shiftwidth=4 
set tabstop=4 #设置tab占4位
```
# 命令
| 命令        | 说明           |
| ------------- |:-------------:|
| :set number或者：set nu     |         使编辑中的文件显示行号| 
| :set nonumber或者：set nonu   |       与上一条命令相反,不显示行号| 
| :help i             |       查看插入命令帮助| 
| /Fedora               |     查找Fedora字符| 
| :s /Fedora/Redhat     |     将Fedora字符替换为Redhat(仅仅替换在光标所在的行)| 
| :%s/ro../r           |      将ro..替换成r。.表示随意字符| 
| :1,.s/redhat/fedora    |    .号表示当前行,即光标所在行 #将第1行到当前行(.)第一次出现的redhat字符取代为fedora| 
| :1,.s/redhat/fedora/g |     将第1行到当前行(.)全部出现的redhat字符取代为fedora,g全局标志| 
| :1,$s/redhat/fedora/g  |    $表示最后一行#将第1行到最后一行全部出现的redhat字符取代为fedora| 
| :%s/redhat/fedora/g   |     同上一个命令| 
| :%s/\/fedora/g      |       将第1行到最后一行全部出现的redhat字取代为fedora#字,而不是字符| 
| :%s/ro/\r&/gc      |        %表示全文，s表示替换。ro替换为换行符。&表示之前要替换的字符ro。g表示一直替换不加g仅仅替换一个，c表示确认是否替换。整句话意思是将ro替换成换行符后跟ro| 
| :f  | #显示文件内容,状态等等#同ctrl+g命令| 
| vi filename | 表示编辑filename文件。假设不存在则创建该文件，假设在进入vi时没有指定文件名称能够进入后用":n filename"来指定文件名称。| 
| :e!       |  放弃全部改动，不包括已保存的| 
| :e        |  文件名称  打开指定文件| 
| D         |  删除当前行光标后的全部字符| 
| y与y$同样  | 表示复制本行光标開始到行末的字符| 
| :w! 文件名称 |  将当前显示文本全部覆盖已存在的文件| 
| :n,mw! 文件名称 |  将当前显示文本的第n到第m行强制写入指定文件| 
| w    | 光标跳到下个单词的首| 
| e   |  光标依次跳到单词末尾 | 
# 替换文本
| 命令        | 说明           |
| ------------- |:-------------:| 
| cc   | 替换当前行| 
| C与c$ |    替换当前行中从光标处到航模的全部字符| 
| cw    |    假设光标在单词头部或中间，从光标处替换到单词尾部。假设光标在单词尾部。则替换尾字母| 
| ce    |    假设光标在单词头部或中间。从光标处替换到单词尾部，假设光标在单词尾部，则替换从尾字母到下一个单词尾部| 
| cb    |    假设光标在单词中间则从光标处替换到单词头部，假设光标在单词头部。则替换之前一个单词| 

::: tip

缓冲区: 缓冲区分为数字缓冲区和字母缓冲区

数字缓冲区：每一次dd删除操作都把删除的内容存入一个数字缓冲区，1号缓冲区永远是近期一次的删除内容。每次删除操作会把1号缓冲区的内容存入2号缓冲区。2号存入3号中。依次类推。调用能够用命令"np(n代表1-9中的数字)

字母缓冲区：字母缓冲区有26个，分别为a-z

命令"add表示删除本行。将本行存入a缓冲区。

调用能够用命令"ap
:::

# 光标控制命令
| 命令        | 光标移动           |
| ------------- |:-------------:| 
| :向上      | 能够反复输入上一个命令 |
|h          |           向左移一个字符|
|j          |           向下移一行|
|nj        |            向下移动n行|
|k        |             向上移一行|
|l         |            向右移一个字符|
|gg或:1      |          移动到文件第一行|
|G         |            移到文件的最后一行|
|w        |             移到下一个字的开头|
|W        |             移到下一个字的开头。忽略标点符号|
|e        |             移到下一个字的结尾|
|E         |            移到下一个字的结尾。忽略标点符号|
|b         |            移到当前字或前一个字的开头|
|B        |             移到前一个字的开头，忽略标点符号|
|L        |             移到屏幕的最后一行|
|M      |               移到屏幕的中间一行|
|H       |              移到屏幕的第一行|
|(      |                   移到句子的开头|
|)      |                   移到句子的结尾|
|{       |                  移到段落的开头|
|}         |                移到下一个段落的开头|
|0(数字), |               移到当前行的第一列|
|^      |                   移到当前行的第一个非空字符|
|$    |                     移到当前行的最后一个字符|
|+, Enter   |            移到下一行的第一个字符|
|-     |                    移到前一行的第一个非空字符|


# 在 vi 中加入文本
|命令       |            插入动作 |
| ------------- |:-------------:| 
|a   |                在光标后插入文本| 
|A    |                在当前行尾插入文本| 
|i    |                在光标前插入文本| 
|I   |                 在当前行前插入文本| 
|o    |                在当前行的下边插入新行| 
|O     |               在当前行的上边插入新行| 
|s       |             删除光标所在处字符，并进入插入模式| 
|S         |           删除光标所在的行。并进入插入模式| 
|:r file     |         读入文件 file 内容，并插在当前行后| 
|:nr file      |       读入文件 file 内容，并插在第 n 行后| 
|Esc             |     回到命令模式| 
# 在 vi 中删除文本               
|命令       |            删除操作 |
| ------------- |:-------------:| 
|x    |               删除光标处的字符，向后删除|
|nx         |         删除本行光标開始之后的n个字符，不包括其他行|
|X       |            删除光标前的单词，向前删除|
|dl    |              删除一个字符|
|dw      |            删至下一个字的开头|
|daw     |            删除当前单词|
|dnw或ndw  |          删除之后n个单词|
|dap   |              删除一个段落|
|dG     |             删除该光标行及之后直到文件结束|
|dd     |             删除整行|
|ndd   |              删除光标下n行|
|db    |              删除光标前面的字|
|:n,md   |            删除n行到m行|
|d, d$   |            从光标处删除到行尾|
|d$     |             从光标处删除到行尾|
|d,d^     |           从光标处删除到行首|
|d^    |              从光标处删除到行首|


# 改动 vi 文本
::: tip
每一个命令前面的数字表示该命令反复的次数
:::
|命令       |            替换操作 |
| ------------- |:-------------:| 
|g~~                     |      光标所在行字母大写和小写反转|
|guu                    |       光标所在行字母变小写|
|gUU                    |       光标所在行字母变大写|
|gUaw                   |       把当前单词转换成大写|
|gUap                   |       把当前段落转换成大写|
|rchar                  |       用 char 替换当前字符|
|R text escape          |       用 text 替换当前字符直到按下 Esc 键|
|stext escape           |       用 text 取代当前字符|
|S 或 cctext escape       |     用 text 取代整行|
|cwtext escape           |      将当前字改为 text|
|Ctext escape             |     将当前行余下的改为 text|
|cG escape              |       改动至文件的末尾|
# 在 vi 中查找与替换

|命令       |            查找与替换操作 |
| ------------- |:-------------:| 
|f字符                  |       在本行查找下一个字符|
|;                     |        移动到下一个用f查找的字符，与上面的f配合使用|
|,                     |        当移动到上一个f查找的字符。与;相反|
|*                    |         全文查找移动到和光标当前的单词一样的下一个单词|
|/text                |         在文件里向前查找 text|
|?text                 |        在文件里向后查找 text|
|n                     |        在同一方向反复查找|
|N                     |        在相反方向反复查找|
|:set ic                 |      查找时忽略大写和小写|
|:set noic               |      查找时对大写和小写敏感|
|:ranges/pat1/pat2/g       |    用 newtext 替换 oldtext|
|:m,ns/oldtext/newtext     |    在 m 行通过 n。用 newtext 替换 oldtext|
|&                          |        反复最后的 :s 命令|
|:g/text1/s/text2/text3     |   查找包括 text1 的行。用 text3 替换 text2|
|:g/text/command           |    在全部包括 text 的行运行 command 所表示的命令|
|:v/text/command             |  在全部不包括 text 的行运行 command 所表示的命令|


# 在 vi 中复制文本
|命令       |            复制操作 | 
| ------------- |:-------------:| 
|yy                 |   将当前行的内容放入暂时缓冲区|
|nyy               |    将 n 行的内容放入暂时缓冲区|
|p                 |    将暂时缓冲区中的文本放入光标后|
|P                |     将暂时缓冲区中的文本放入光标前|
|np               |     将暂时缓冲区中的文本放入光标后n次|
|nP                |    将暂时缓冲区中的文本放入光标前n次|
# 在 vi 中撤消与反复
|命令       |            撤消操作 | 
| ------------- |:-------------:| 
|u              | 撤消上一步操作|
|U              | 撤消当前行的全部改动|
|ctrl+r         | 反复键入，和撤销相反|
|.              |    反复最后一次改动|
|,              |    以相反的方向反复前面的 f、F、t 或 T 查找命令|
|;              |    反复前面的 f、F、t 或 T 查找命令|
|n              | 反复前面的 / 或 ? 查找命令
|N              | 以相反方向反复前面的 / 或 ? 命令|
# 保存文本和退出 vi                 
|命令       |             保存和/或退出操作 | 
| ------------- |:-------------:| 
|:w                   | 保存文件但不退出 vi|
|:w file              | 将改动保存在 file 中但不退出 vi|
|:wq 或 ZZ 或 :x        | 保存文件并退出 vi|
|:q!                  | 不保存文件，退出 vi|
|:e!                  | 放弃全部改动，从上次保存文件開始再编辑|
|:set go=              |go表示gui option的缩写。等于空就是什么都没有|
|vim file1 file2...filen | 能够打开多个文件（在shell中输入的）|
|vim + filename       |            进行文件最后一行进行编辑|
|vim +n filename      |            进入文件第n行进行编辑|
|:e xx.txt          |   打开某文件|
|:open file          |  打开某文件，同上|
|:tabnew D:\text.txt | 新选项卡中打开某文件，输入:tabnew D:\t再按tab，会自己主动补全text.txt。假设不正确再按几次tab，直到正确为止。|
|:bn           |        文件切换，下一个文件|
|:bp            |       文件切换。上一个文件|
|ctrl+6           |     文件切换，下一个文件|
|:split           |     多个文件上下排列，能够通过:q退出当前窗体|
|:vsplit         |      多个文件左右排列|
